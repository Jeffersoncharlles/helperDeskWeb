var de=Object.defineProperty,ue=Object.defineProperties;var me=Object.getOwnPropertyDescriptors;var M=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var X=(t,a,r)=>a in t?de(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,B=(t,a)=>{for(var r in a||(a={}))Q.call(a,r)&&X(t,r,a[r]);if(M)for(var r of M(a))Y.call(a,r)&&X(t,r,a[r]);return t},q=(t,a)=>ue(t,me(a));var Z=(t,a)=>{var r={};for(var s in t)Q.call(t,s)&&a.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&M)for(var s of M(t))a.indexOf(s)<0&&Y.call(t,s)&&(r[s]=t[s]);return r};import{f as g,r as c,j as e,t as S,a as n,L as k,F as he,b as re,c as se,u as _e,d as pe,e as U,g as J,h as fe,i as ee,k as ge,l as ve,m as be,n as ye,o as te,R as ae,p as Se,S as Ce,B as xe,T as Ne,q as we,s as Fe}from"./vendor.b5601dc9.js";const $e=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const d of o)if(d.type==="childList")for(const _ of d.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&s(_)}).observe(document,{childList:!0,subtree:!0});function r(o){const d={};return o.integrity&&(d.integrity=o.integrity),o.referrerpolicy&&(d.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?d.credentials="include":o.crossorigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function s(o){if(o.ep)return;o.ep=!0;const d=r(o);fetch(o.href,d)}};$e();const Ee={apiKey:"AIzaSyAL0i4LyBeU1Lp7b655w7HpsadCnfWITtU",authDomain:"helperdesk-59688.firebaseapp.com",projectId:"helperdesk-59688",storageBucket:"helperdesk-59688.appspot.com",messagingSenderId:"791202362469",appId:"1:791202362469:web:a7c1bcaf339a16436e028c",measurementId:"G-EM1TN94H19"};g.apps.length||g.initializeApp(Ee);const N={position:"top-right",autoClose:1500,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!1,progress:void 0,theme:"dark"},ce=c.exports.createContext({}),ke=({children:t})=>{const[a,r]=c.exports.useState({}),[s,o]=c.exports.useState(!1),[d,_]=c.exports.useState(!0);c.exports.useEffect(()=>{u()},[]);const u=()=>{const x=localStorage.getItem("@deskSystem");x&&(r(JSON.parse(x)),_(!1)),_(!1)},w=async({email:x,password:F,name:h})=>{o(!0),await g.auth().createUserWithEmailAndPassword(x,F).then(async({user:l})=>{let f=l==null?void 0:l.uid;await g.firestore().collection("users").doc(f).set({name:h,avatarUrl:null}).then(()=>{let v={uid:l==null?void 0:l.uid,name:h,email:l==null?void 0:l.email,avatarUrl:null};r(v),p(v),o(!1),S.success("Bem vindo a plataforma!",N)})}).catch(l=>{console.log(l),S.error("Ops algo deu errado!",N),o(!1)})},C=async(x,F)=>{o(!0),await g.auth().signInWithEmailAndPassword(x,F).then(async({user:h})=>{var i,z;let l=h==null?void 0:h.uid;const f=await g.firestore().collection("users").doc(l).get();let v={uid:h==null?void 0:h.uid,name:(i=f.data())==null?void 0:i.name,email:h==null?void 0:h.email,avatarUrl:(z=f.data())==null?void 0:z.avatarUrl};r(v),p(v),o(!1),S.success("Bem vindo de volta!",N)}).catch(h=>{console.log(h),S.error("Ops algo deu errado!",N),o(!1)})},p=async x=>{localStorage.setItem("@deskSystem",JSON.stringify(x))},E=async()=>{await g.auth().signOut(),localStorage.removeItem("@deskSystem"),r({})};return e(ce.Provider,{value:{signed:!!a.email,user:a,loading:d,isAuth:s,SignUp:w,signOut:E,SignIn:C,setUser:r,storageSave:p},children:t})},L=()=>c.exports.useContext(ce);//!!user converte para true ou false
var Ae={};const Pe=()=>n("div",{className:Ae.container,children:[e("h2",{children:"Not Found 404..."}),e("p",{children:e(k,{to:"/",children:"Go to the home page"})})]}),De="_container_f7mo8_1";var Ue={container:De},ie="/helperDeskWeb/assets/avatar.9a7b892a.png";const j=()=>{const{user:t}=L();return n("header",{className:Ue.container,children:[e("picture",{children:e("img",{src:t.avatarUrl===null?ie:t.avatarUrl,alt:"Foto Avatar"})}),n(k,{to:"/dashboard",children:[e(he,{size:24,color:"#fff"}),"Chamados"]}),n(k,{to:"/customers",children:[e(re,{size:24,color:"#fff"}),"Clientes"]}),n(k,{to:"/profile",children:[e(se,{size:24,color:"#fff"}),"Configura\xE7\xF5es"]})]})},ze="_container_1jdyo_1";var Ie={container:ze};const R=({children:t,name:a})=>n("section",{className:Ie.container,children:[t,e("span",{children:a})]}),Oe="_content_o1aos_75",Le="_content_form_o1aos_83",je="_container_o1aos_115",Re="_status_o1aos_136";var H={content:Oe,content_form:Le,container:je,status:Re};const ne=()=>{const{postId:t}=_e(),a=pe(),{user:r}=L(),[s,o]=c.exports.useState([]),[d,_]=c.exports.useState(!0),[u,w]=c.exports.useState(0),[C,p]=c.exports.useState(!1),[E,x]=c.exports.useState("Suporte"),[F,h]=c.exports.useState("Aberto"),[l,f]=c.exports.useState("");c.exports.useEffect(()=>{v()},[]);const v=async()=>{await g.firestore().collection("customers").get().then(m=>{let b=[];if(m.forEach(y=>{b.push({id:y.id,nameFantasy:y.data().nameFantasy})}),b.length===0){o([{id:"1",nameFantasy:"",address:"",cnpj:""}]),_(!1);return}o(b),_(!1),t&&i(b)}).catch(m=>{console.log("deu erro"),_(!1),o([{id:"1",nameFantasy:"",address:"",cnpj:""}])})},i=async m=>{await g.firestore().collection("calls").doc(t).get().then(b=>{var W,G,K;x((W=b.data())==null?void 0:W.topic),h((G=b.data())==null?void 0:G.status),f((K=b.data())==null?void 0:K.subject);let y=m.findIndex(le=>{var V;return le.id===((V=b.data())==null?void 0:V.client_id)});w(y),p(!0)}).catch(b=>{console.log("deu erro"),p(!1)})},z=async m=>{if(m.preventDefault(),C){await g.firestore().collection("calls").doc(t).update({client:s[u].nameFantasy,client_id:s[u].id,topic:E,status:F,subject:l,user_id:r.uid}).then(()=>{S.success("Atualizado com sucesso",N),f(""),w(0),a.push("/dashboard")}).catch(b=>{S.error("ocorreu um erro ao registar",N)});return}await g.firestore().collection("calls").add({created_at:new Date,client:s[u].nameFantasy,client_id:s[u].id,topic:E,status:F,subject:l,user_id:r.uid}).then(()=>{S.success("Chamado criado com sucesso!!",N),f(""),w(0)}).catch(b=>{S.error("ocorreu um erro ao registar",N)})};return n(U,{children:[e(j,{}),n("main",{className:H.container,children:[e(R,{name:"Novo chamado",children:e(J,{size:24})}),e("section",{className:`${H.content}`,children:n("form",{className:`${H.content_form}`,onSubmit:z,children:[e("label",{htmlFor:"Cliente",children:"Cliente"}),d?e("input",{type:"text",disabled:!0,value:"carregando clientes..."}):e("select",{value:u,onChange:m=>w(Number(m.target.value)),children:s.map((m,b)=>e("option",{value:b,children:m.nameFantasy},m.id))}),e("label",{htmlFor:"Assunto",children:"Assunto"}),n("select",{value:E,onChange:m=>x(m.target.value),children:[e("option",{value:"Suporte",children:"Suporte"}),e("option",{value:"Visita T\xE9cnica",children:"Visita T\xE9cnica"}),e("option",{value:"Financeiro",children:"Financeiro"})]}),e("label",{htmlFor:"Status",children:"Status"}),n("div",{className:H.status,children:[e("input",{type:"radio",name:"radio",value:"Aberto",onChange:m=>h(m.target.value),checked:F==="Aberto"}),e("span",{children:"Em Aberto"}),e("input",{type:"radio",name:"radio",value:"Progresso",onChange:m=>h(m.target.value),checked:F==="Progresso"}),e("span",{children:"Em Progresso"}),e("input",{type:"radio",name:"radio",value:"Atendido",onChange:m=>h(m.target.value),checked:F==="Atendido"}),e("span",{children:"Finalizado"})]}),e("br",{}),e("label",{htmlFor:"Complemento",children:"Complemento"}),e("textarea",{placeholder:"Descreva seu problema (opcional).",value:l,onChange:m=>f(m.target.value)}),e("button",{type:"submit",children:"Registrar"})]})})]})]})},Me="_content_1lfm9_75",Be="_content_form_1lfm9_83",He="_container_1lfm9_115";var T={content:Me,content_form:Be,container:He};const Te=t=>t.replace(/\D+/g,"").replace(/(\d{2})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1/$2").replace(/(\d{4})(\d)/,"$1-$2").replace(/(-\d{2})\d+?$/,"$1"),qe=()=>{const[t,a]=c.exports.useState(""),[r,s]=c.exports.useState(""),[o,d]=c.exports.useState("");document.title="Customers || HelperDesk";const _=async u=>{u.preventDefault(),t!==""&&r!==""&&o!==""?await g.firestore().collection("customers").add({nameFantasy:t,cnpj:r,address:o}).then(()=>{a(""),s(""),d(""),S.success("Empresa Cadastrada com sucesso!",N)}).catch(w=>{S.error("Ocorreu um erro tenta novamente mais tarde",N)}):S.error("Preencha todos os campos!",N)};return n(U,{children:[e(j,{}),n("main",{className:T.container,children:[e(R,{name:"Clientes",children:e(re,{size:24})}),e("section",{className:T.content,children:n("form",{className:`${T.content_form} ${T.customers}`,onSubmit:_,children:[e("label",{htmlFor:"Nome fantasia",children:"Nome Fantasia"}),e("input",{type:"text",value:t,onChange:u=>a(u.target.value)}),e("label",{htmlFor:"CNPJ",children:"CNPJ"}),e("input",{placeholder:"00.000.000/0000-00",type:"text",value:r,onChange:u=>s(Te(u.target.value))}),e("label",{htmlFor:"Endere\xE7o",children:"Endere\xE7o"}),e("input",{type:"text",value:o,onChange:u=>d(u.target.value)}),e("button",{type:"submit",children:"Cadastrar"})]})})]})]})},Je="_content_1wfns_75",We="_content_form_1wfns_83",Ge="_container_1wfns_115",Ke="_dashboard_1wfns_125",Ve="_more_1wfns_137",Xe="_action_1wfns_198",Qe="_badge_1wfns_208";var $={content:Je,content_form:We,container:Ge,dashboard:Ke,more:Ve,new:"_new_1wfns_148",action:Xe,badge:Qe};const Ye=t=>new Date(t).toLocaleDateString("pt-BR",{day:"2-digit",month:"long",year:"numeric"}),Ze="_content_1n7l6_75",et="_content_form_1n7l6_83",tt="_modal_1n7l6_115",at="_modal_container_1n7l6_126",nt="_modal_container_close_1n7l6_141",ot="_modal_container_row_1n7l6_167";var I={content:Ze,content_form:et,modal:tt,modal_container:at,modal_container_close:nt,modal_container_row:ot};const rt=({close:t,content:a})=>e("div",{className:I.modal,children:n("div",{className:I.modal_container,children:[e("button",{className:I.modal_container_close,onClick:t,children:e(fe,{size:24})}),n("section",{children:[e("h2",{children:"Detalhes do chamado"}),e("div",{className:I.modal_container_row,children:n("span",{children:["Cliente: ",e("i",{children:a==null?void 0:a.client})]})}),n("div",{className:I.modal_container_row,children:[n("span",{children:["Assunto: ",e("i",{children:a==null?void 0:a.topic})]}),n("span",{children:["Cadastrado em: ",e("i",{children:a==null?void 0:a.created_formatted})]})]}),e("div",{className:I.modal_container_row,children:n("span",{children:["Status: ",e("i",{style:{backgroundColor:(a==null?void 0:a.status)==="Aberto"?"#5cb85c":"#999",color:"#2b134b"},children:a==null?void 0:a.status})]})}),(a==null?void 0:a.subject)!==""&&n(U,{children:[e("h3",{children:"Complemento"}),e("p",{children:a==null?void 0:a.subject})]})]})]})}),oe=g.firestore().collection("calls").orderBy("created_at","desc"),st=()=>{const[t,a]=c.exports.useState([]),[r,s]=c.exports.useState(!0),[o,d]=c.exports.useState(!1),[_,u]=c.exports.useState(!1),[w,C]=c.exports.useState(),[p,E]=c.exports.useState(!1),[x,F]=c.exports.useState();document.title="Dashboard || HelperDesk",c.exports.useEffect(()=>(h(),()=>{}),[]);const h=async()=>{await oe.limit(5).get().then(i=>{l(i)}).catch(i=>{console.log(i),S.error("Ocorreu um erro ao carregar os chamados"),d(!1)}),s(!1)},l=async i=>{if(i.size===0)u(!0);else{let m=[];i.forEach(y=>{m.push({id:y.id,topic:y.data().topic,subject:y.data().subject,client:y.data().client,client_id:y.data().client_id,created_at:y.data().created_at,status:y.data().status,created_formatted:Ye(y.data().created_at.seconds*1e3+y.data().created_at.nanoseconds/1e6)})});const b=i.docs[i.docs.length-1];a(y=>[...y,...m]),C(b)}d(!1)},f=async()=>{d(!0),await oe.startAfter(w).limit(5).get().then(i=>{l(i)}).catch()},v=i=>{E(!p),F(i)};return r?n(U,{children:[e(j,{}),n("main",{className:$.container,children:[e(R,{name:"Atendimentos",children:e(ee,{size:24})}),e("section",{className:`${$.content} ${$.dashboard}`,children:e("span",{children:"Buscando Chamados"})})]})]}):n(U,{children:[e(j,{}),n("main",{className:$.container,children:[e(R,{name:"Atendimentos",children:e(ee,{size:24})}),t.length===0?n("section",{className:`${$.content} ${$.dashboard}`,children:[e("span",{children:"Nenhum Chamado Registrado..."}),n(k,{to:"/new",className:$.new,children:[e(J,{size:24}),"Novo chamado"]})]}):n(U,{children:[n(k,{to:"/new",className:$.new,children:[e(J,{size:24}),"Novo chamado"]}),n("table",{children:[e("thead",{children:n("tr",{children:[e("th",{scope:"col",children:"Cliente"}),e("th",{scope:"col",children:"Assunto"}),e("th",{scope:"col",children:"Status"}),e("th",{scope:"col",children:"Criado em"}),e("th",{children:"#"})]})}),e("tbody",{children:t.map((i,z)=>n("tr",{children:[e("td",{"data-label":"Cliente",children:i.client}),e("td",{"data-label":"Assunto",children:i.topic}),e("td",{"data-label":"Status",children:e("span",{className:$.badge,style:{backgroundColor:i.status==="Aberto"?"#5cb85c":"#999"},children:i.status})}),e("td",{"data-label":"Cadastrado",children:i.created_formatted}),n("td",{"data-label":"#",children:[e("button",{className:$.action,style:{backgroundColor:"#3583f6"},onClick:()=>v(i),children:e(ge,{color:"#fff",size:16})}),e(k,{className:$.action,style:{backgroundColor:"#f6a935"},to:`/new/${i.id}`,children:e(ve,{color:"#fff",size:16})})]})]},i.id))})]}),o&&e("h3",{style:{marginTop:15},children:"Buscando dados..."}),!o&&!_&&e("button",{className:$.more,onClick:f,children:"Buscar Mais"})]}),p&&e(rt,{content:x,close:v})]})]})},ct="_container_gkq9f_1",it="_content_gkq9f_11",lt="_content_form_gkq9f_19",dt="_content_form_avatar_gkq9f_23",ut="_content_logout_gkq9f_76";var O={container:ct,content:it,content_form:lt,content_form_avatar:dt,content_logout:ut};const mt=()=>{const{user:t,signOut:a,setUser:r,storageSave:s}=L(),[o,d]=c.exports.useState(t&&t.name),[_,u]=c.exports.useState(t&&t.email),[w,C]=c.exports.useState(t&&t.avatarUrl),[p,E]=c.exports.useState(null);document.title="Profile || HelperDesk";const x=async l=>{var f,v;if((f=l.target.files)==null?void 0:f[0]){const i=(v=l.target.files)==null?void 0:v[0];if(i.type==="image/jpeg"||i.type==="image/png")E(i),C(URL.createObjectURL(l.target.files[0]));else return S.warning("Envie imagem do tipo PNG ou JPEG",N),E(null),null}},F=async()=>{const l=t.uid;await g.storage().ref(`images/${l}/${p==null?void 0:p.name}`).put(p).then(async()=>{await g.storage().ref(`images/${l}`).child(p==null?void 0:p.name).getDownloadURL().then(async f=>{let v=f;await g.firestore().collection("users").doc(t.uid).update({avatarUrl:v,name:o}).then(()=>{let i=q(B({},t),{name:o,avatarUrl:v});r(i),s(i),S.success("Foto Salva com Sucesso",N)})})})},h=async l=>{l.preventDefault(),p===null&&o!==""?await g.firestore().collection("users").doc(t.uid).update({name:o}).then(()=>{let f=q(B({},t),{name:o});r(f),s(f),S.success("Nome alterado com sucesso!",N)}).catch(f=>{S.error("Ocorreu um erro!tente mais tarde!",N)}):o!==""&&p!==null&&F()};return n(U,{children:[e(j,{}),e("main",{className:O.container,children:n("section",{children:[e(R,{name:"Meu perfil",children:e(se,{size:24})}),e("div",{className:O.content,children:n("form",{className:O.content_form,onSubmit:h,children:[n("label",{htmlFor:"upload avatar",className:O.content_form_avatar,children:[e("span",{children:e(be,{color:"#FFF",size:25})}),e("input",{type:"file",accept:"image/*",onChange:x}),w===null?e("img",{src:ie,width:"250",height:"250",alt:"Foto de perfil do usu\xE1rio"}):e("img",{src:w,width:"250",height:"250",alt:"Foto de perfil do usu\xE1rio"})]}),e("label",{htmlFor:"Nome",children:"Nome"}),e("input",{type:"text",value:o,onChange:l=>d(l.target.value)}),e("label",{htmlFor:"Email",children:"Email"}),e("input",{type:"email",value:String(_),disabled:!0}),e("button",{type:"submit",children:"Salvar"})]})}),e("div",{className:O.content,children:e("button",{className:O.content_logout,onClick:()=>a(),children:"Sair"})})]})})]})},ht="_container_tzf5t_1",_t="_container_left_tzf5t_10",pt="_container_left_animate_tzf5t_21",ft="_container_right_tzf5t_24",gt="_container_right_card_tzf5t_31",vt="_card_textfield_tzf5t_48";var D={container:ht,container_left:_t,container_left_animate:pt,container_right:ft,container_right_card:gt,card_textfield:vt};ye().shape({email:te().email().required(),password:te()});const bt=()=>{const{SignIn:t,isAuth:a}=L(),[r,s]=c.exports.useState(""),[o,d]=c.exports.useState("");document.title="Signin || HelperDesk";const _=u=>{u.preventDefault(),r!==""&&o!==""&&t(r,o)};return n("main",{className:D.container,children:[n("section",{className:D.container_left,children:[n("h1",{children:["HelperDesk ",e("br",{})," "]}),e("div",{className:D.container_left_animate})]}),e("section",{className:D.container_right,children:n("form",{className:D.container_right_card,onSubmit:_,children:[n("div",{className:D.card_textfield,children:[e("label",{htmlFor:"email",children:"Email"}),e("input",{type:"email",placeholder:"email@email.com",value:r,onChange:u=>s(u.target.value)})]}),n("div",{className:D.card_textfield,children:[e("label",{htmlFor:"password",children:"Password"}),e("input",{type:"password",placeholder:"******",value:o,onChange:u=>d(u.target.value)})]}),e("button",{type:"submit",children:a?"Carregando..":"Acessar"}),e(k,{to:"/register",children:"Criar uma Conta"})]})})]})},yt="_container_1gmfy_1",St="_container_left_1gmfy_10",Ct="_container_left_animate_1gmfy_21",xt="_container_right_1gmfy_24",Nt="_container_right_card_1gmfy_31",wt="_card_textfield_1gmfy_48";var A={container:yt,container_left:St,container_left_animate:Ct,container_right:xt,container_right_card:Nt,card_textfield:wt};const Ft=()=>{const{SignUp:t,isAuth:a}=L(),[r,s]=c.exports.useState(""),[o,d]=c.exports.useState(""),[_,u]=c.exports.useState("");document.title="Signin || HelperDesk";const w=C=>{C.preventDefault(),_!==""&&r!==""&&o!==""&&t({email:r,password:o,name:_})};return n("main",{className:A.container,children:[n("section",{className:A.container_left,children:[n("h1",{children:["Criar Cadastro ",e("br",{})," "]}),e("div",{className:A.container_left_animate})]}),e("section",{className:A.container_right,children:n("form",{className:A.container_right_card,onSubmit:w,children:[n("div",{className:A.card_textfield,children:[e("label",{htmlFor:"nome",children:"Nome"}),e("input",{type:"name",value:_,onChange:C=>u(C.target.value)})]}),n("div",{className:A.card_textfield,children:[e("label",{htmlFor:"email",children:"Email"}),e("input",{type:"email",value:r,onChange:C=>s(C.target.value)})]}),n("div",{className:A.card_textfield,children:[e("label",{htmlFor:"password",children:"Password"}),e("input",{type:"password",placeholder:"******",value:o,onChange:C=>d(C.target.value)})]}),e("button",{type:"submit",children:a?"Carregando..":"Cadastrar"}),e(k,{to:"/",children:"J\xE1 tem uma conta? Entre"})]})})]})},P=r=>{var s=r,{isPrivate:t}=s,a=Z(s,["isPrivate"]);const{signed:o,loading:d}=L();return d?e("div",{}):!o&&t?e(ae,{to:"/"}):o&&!t?e(ae,{to:"/dashboard"}):e(Se,B({},a))},$t=()=>n(Ce,{children:[e(P,{exact:!0,path:"/",component:bt}),e(P,{exact:!0,path:"/register",component:Ft}),e(P,{exact:!0,path:"/dashboard",component:st,isPrivate:!0}),e(P,{exact:!0,path:"/profile",component:mt,isPrivate:!0}),e(P,{exact:!0,path:"/customers",component:qe,isPrivate:!0}),e(P,{exact:!0,path:"/new",component:ne,isPrivate:!0}),e(P,{exact:!0,path:"/new/:postId",component:ne,isPrivate:!0}),e(P,{exact:!0,path:"*",component:Pe})]});function Et(){return e(ke,{children:n(xe,{children:[e(Ne,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,pauseOnFocusLoss:!1,pauseOnHover:!1}),e($t,{})]})})}we.render(e(Fe.StrictMode,{children:e(Et,{})}),document.getElementById("root"));
