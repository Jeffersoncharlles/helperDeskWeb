var de=Object.defineProperty,ue=Object.defineProperties;var me=Object.getOwnPropertyDescriptors;var M=Object.getOwnPropertySymbols;var Y=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;var Q=(t,a,r)=>a in t?de(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,B=(t,a)=>{for(var r in a||(a={}))Y.call(a,r)&&Q(t,r,a[r]);if(M)for(var r of M(a))Z.call(a,r)&&Q(t,r,a[r]);return t},q=(t,a)=>ue(t,me(a));var ee=(t,a)=>{var r={};for(var s in t)Y.call(t,s)&&a.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&M)for(var s of M(t))a.indexOf(s)<0&&Z.call(t,s)&&(r[s]=t[s]);return r};import{f as g,r as c,j as e,t as S,a as o,L as P,F as he,b as re,c as se,u as _e,d as pe,e as U,g as W,h as fe,i as te,k as ge,l as ve,m as be,n as ye,o as ae,R as ne,p as Se,S as Ce,B as xe,T as Ne,q as we,s as Fe}from"./vendor.b5601dc9.js";const $e=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const d of n)if(d.type==="childList")for(const _ of d.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&s(_)}).observe(document,{childList:!0,subtree:!0});function r(n){const d={};return n.integrity&&(d.integrity=n.integrity),n.referrerpolicy&&(d.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?d.credentials="include":n.crossorigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function s(n){if(n.ep)return;n.ep=!0;const d=r(n);fetch(n.href,d)}};$e();const Ee={apiKey:"AIzaSyAL0i4LyBeU1Lp7b655w7HpsadCnfWITtU",authDomain:"helperdesk-59688.firebaseapp.com",projectId:"helperdesk-59688",storageBucket:"helperdesk-59688.appspot.com",messagingSenderId:"791202362469",appId:"1:791202362469:web:a7c1bcaf339a16436e028c",measurementId:"G-EM1TN94H19"};g.apps.length||g.initializeApp(Ee);const N={position:"top-right",autoClose:1500,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!1,progress:void 0,theme:"dark"},ce=c.exports.createContext({}),ke=({children:t})=>{const[a,r]=c.exports.useState({}),[s,n]=c.exports.useState(!1),[d,_]=c.exports.useState(!0);c.exports.useEffect(()=>{u()},[]);const u=()=>{const x=localStorage.getItem("@deskSystem");x&&(r(JSON.parse(x)),_(!1)),_(!1)},w=async({email:x,password:F,name:h})=>{n(!0),await g.auth().createUserWithEmailAndPassword(x,F).then(async({user:l})=>{let f=l==null?void 0:l.uid;await g.firestore().collection("users").doc(f).set({name:h,avatarUrl:null}).then(()=>{let v={uid:l==null?void 0:l.uid,name:h,email:l==null?void 0:l.email,avatarUrl:null};r(v),p(v),n(!1),S.success("Bem vindo a plataforma!",N)})}).catch(l=>{console.log(l),S.error("Ops algo deu errado!",N),n(!1)})},C=async(x,F)=>{n(!0),await g.auth().signInWithEmailAndPassword(x,F).then(async({user:h})=>{var i,z;let l=h==null?void 0:h.uid;const f=await g.firestore().collection("users").doc(l).get();let v={uid:h==null?void 0:h.uid,name:(i=f.data())==null?void 0:i.name,email:h==null?void 0:h.email,avatarUrl:(z=f.data())==null?void 0:z.avatarUrl};r(v),p(v),n(!1),S.success("Bem vindo de volta!",N)}).catch(h=>{console.log(h),S.error("Ops algo deu errado!",N),n(!1)})},p=async x=>{localStorage.setItem("@deskSystem",JSON.stringify(x))},E=async()=>{await g.auth().signOut(),localStorage.removeItem("@deskSystem"),r({})};return e(ce.Provider,{value:{signed:!!a.email,user:a,loading:d,isAuth:s,SignUp:w,signOut:E,SignIn:C,setUser:r,storageSave:p},children:t})},L=()=>c.exports.useContext(ce);//!!user converte para true ou false
const Ae="_container_f7mo8_1";var Pe={container:Ae},ie="/helperDeskWeb/assets/avatar.9a7b892a.png";const j=()=>{const{user:t}=L();return o("header",{className:Pe.container,children:[e("picture",{children:e("img",{src:t.avatarUrl===null?ie:t.avatarUrl,alt:"Foto Avatar"})}),o(P,{to:"/dashboard",children:[e(he,{size:24,color:"#fff"}),"Chamados"]}),o(P,{to:"/customers",children:[e(re,{size:24,color:"#fff"}),"Clientes"]}),o(P,{to:"/profile",children:[e(se,{size:24,color:"#fff"}),"Configura\xE7\xF5es"]})]})},De="_container_1jdyo_1";var Ue={container:De};const R=({children:t,name:a})=>o("section",{className:Ue.container,children:[t,e("span",{children:a})]}),ze="_content_o1aos_75",Ie="_content_form_o1aos_83",Oe="_container_o1aos_115",Le="_status_o1aos_136";var H={content:ze,content_form:Ie,container:Oe,status:Le};const J=()=>{const{postId:t}=_e(),a=pe(),{user:r}=L(),[s,n]=c.exports.useState([]),[d,_]=c.exports.useState(!0),[u,w]=c.exports.useState(0),[C,p]=c.exports.useState(!1),[E,x]=c.exports.useState("Suporte"),[F,h]=c.exports.useState("Aberto"),[l,f]=c.exports.useState("");c.exports.useEffect(()=>{v()},[]);const v=async()=>{await g.firestore().collection("customers").get().then(m=>{let b=[];if(m.forEach(y=>{b.push({id:y.id,nameFantasy:y.data().nameFantasy})}),b.length===0){n([{id:"1",nameFantasy:"",address:"",cnpj:""}]),_(!1);return}n(b),_(!1),t&&i(b)}).catch(m=>{console.log("deu erro"),_(!1),n([{id:"1",nameFantasy:"",address:"",cnpj:""}])})},i=async m=>{await g.firestore().collection("calls").doc(t).get().then(b=>{var G,K,V;x((G=b.data())==null?void 0:G.topic),h((K=b.data())==null?void 0:K.status),f((V=b.data())==null?void 0:V.subject);let y=m.findIndex(le=>{var X;return le.id===((X=b.data())==null?void 0:X.client_id)});w(y),p(!0)}).catch(b=>{console.log("deu erro"),p(!1)})},z=async m=>{if(m.preventDefault(),C){await g.firestore().collection("calls").doc(t).update({client:s[u].nameFantasy,client_id:s[u].id,topic:E,status:F,subject:l,user_id:r.uid}).then(()=>{S.success("Atualizado com sucesso",N),f(""),w(0),a.push("/dashboard")}).catch(b=>{S.error("ocorreu um erro ao registar",N)});return}await g.firestore().collection("calls").add({created_at:new Date,client:s[u].nameFantasy,client_id:s[u].id,topic:E,status:F,subject:l,user_id:r.uid}).then(()=>{S.success("Chamado criado com sucesso!!",N),f(""),w(0)}).catch(b=>{S.error("ocorreu um erro ao registar",N)})};return o(U,{children:[e(j,{}),o("main",{className:H.container,children:[e(R,{name:"Novo chamado",children:e(W,{size:24})}),e("section",{className:`${H.content}`,children:o("form",{className:`${H.content_form}`,onSubmit:z,children:[e("label",{htmlFor:"Cliente",children:"Cliente"}),d?e("input",{type:"text",disabled:!0,value:"carregando clientes..."}):e("select",{value:u,onChange:m=>w(Number(m.target.value)),children:s.map((m,b)=>e("option",{value:b,children:m.nameFantasy},m.id))}),e("label",{htmlFor:"Assunto",children:"Assunto"}),o("select",{value:E,onChange:m=>x(m.target.value),children:[e("option",{value:"Suporte",children:"Suporte"}),e("option",{value:"Visita T\xE9cnica",children:"Visita T\xE9cnica"}),e("option",{value:"Financeiro",children:"Financeiro"})]}),e("label",{htmlFor:"Status",children:"Status"}),o("div",{className:H.status,children:[e("input",{type:"radio",name:"radio",value:"Aberto",onChange:m=>h(m.target.value),checked:F==="Aberto"}),e("span",{children:"Em Aberto"}),e("input",{type:"radio",name:"radio",value:"Progresso",onChange:m=>h(m.target.value),checked:F==="Progresso"}),e("span",{children:"Em Progresso"}),e("input",{type:"radio",name:"radio",value:"Atendido",onChange:m=>h(m.target.value),checked:F==="Atendido"}),e("span",{children:"Finalizado"})]}),e("br",{}),e("label",{htmlFor:"Complemento",children:"Complemento"}),e("textarea",{placeholder:"Descreva seu problema (opcional).",value:l,onChange:m=>f(m.target.value)}),e("button",{type:"submit",children:"Registrar"})]})})]})]})},je="_content_1lfm9_75",Re="_content_form_1lfm9_83",Me="_container_1lfm9_115";var T={content:je,content_form:Re,container:Me};const Be=t=>t.replace(/\D+/g,"").replace(/(\d{2})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1/$2").replace(/(\d{4})(\d)/,"$1-$2").replace(/(-\d{2})\d+?$/,"$1"),He=()=>{const[t,a]=c.exports.useState(""),[r,s]=c.exports.useState(""),[n,d]=c.exports.useState("");document.title="Customers || HelperDesk";const _=async u=>{u.preventDefault(),t!==""&&r!==""&&n!==""?await g.firestore().collection("customers").add({nameFantasy:t,cnpj:r,address:n}).then(()=>{a(""),s(""),d(""),S.success("Empresa Cadastrada com sucesso!",N)}).catch(w=>{S.error("Ocorreu um erro tenta novamente mais tarde",N)}):S.error("Preencha todos os campos!",N)};return o(U,{children:[e(j,{}),o("main",{className:T.container,children:[e(R,{name:"Clientes",children:e(re,{size:24})}),e("section",{className:T.content,children:o("form",{className:`${T.content_form} ${T.customers}`,onSubmit:_,children:[e("label",{htmlFor:"Nome fantasia",children:"Nome Fantasia"}),e("input",{type:"text",value:t,onChange:u=>a(u.target.value)}),e("label",{htmlFor:"CNPJ",children:"CNPJ"}),e("input",{placeholder:"00.000.000/0000-00",type:"text",value:r,onChange:u=>s(Be(u.target.value))}),e("label",{htmlFor:"Endere\xE7o",children:"Endere\xE7o"}),e("input",{type:"text",value:n,onChange:u=>d(u.target.value)}),e("button",{type:"submit",children:"Cadastrar"})]})})]})]})},Te="_content_1wfns_75",qe="_content_form_1wfns_83",Je="_container_1wfns_115",We="_dashboard_1wfns_125",Ge="_more_1wfns_137",Ke="_action_1wfns_198",Ve="_badge_1wfns_208";var $={content:Te,content_form:qe,container:Je,dashboard:We,more:Ge,new:"_new_1wfns_148",action:Ke,badge:Ve};const Xe=t=>new Date(t).toLocaleDateString("pt-BR",{day:"2-digit",month:"long",year:"numeric"}),Qe="_content_1n7l6_75",Ye="_content_form_1n7l6_83",Ze="_modal_1n7l6_115",et="_modal_container_1n7l6_126",tt="_modal_container_close_1n7l6_141",at="_modal_container_row_1n7l6_167";var I={content:Qe,content_form:Ye,modal:Ze,modal_container:et,modal_container_close:tt,modal_container_row:at};const nt=({close:t,content:a})=>e("div",{className:I.modal,children:o("div",{className:I.modal_container,children:[e("button",{className:I.modal_container_close,onClick:t,children:e(fe,{size:24})}),o("section",{children:[e("h2",{children:"Detalhes do chamado"}),e("div",{className:I.modal_container_row,children:o("span",{children:["Cliente: ",e("i",{children:a==null?void 0:a.client})]})}),o("div",{className:I.modal_container_row,children:[o("span",{children:["Assunto: ",e("i",{children:a==null?void 0:a.topic})]}),o("span",{children:["Cadastrado em: ",e("i",{children:a==null?void 0:a.created_formatted})]})]}),e("div",{className:I.modal_container_row,children:o("span",{children:["Status: ",e("i",{style:{backgroundColor:(a==null?void 0:a.status)==="Aberto"?"#5cb85c":"#999",color:"#2b134b"},children:a==null?void 0:a.status})]})}),(a==null?void 0:a.subject)!==""&&o(U,{children:[e("h3",{children:"Complemento"}),e("p",{children:a==null?void 0:a.subject})]})]})]})}),oe=g.firestore().collection("calls").orderBy("created_at","desc"),ot=()=>{const[t,a]=c.exports.useState([]),[r,s]=c.exports.useState(!0),[n,d]=c.exports.useState(!1),[_,u]=c.exports.useState(!1),[w,C]=c.exports.useState(),[p,E]=c.exports.useState(!1),[x,F]=c.exports.useState();document.title="Dashboard || HelperDesk",c.exports.useEffect(()=>(h(),()=>{}),[]);const h=async()=>{await oe.limit(5).get().then(i=>{l(i)}).catch(i=>{console.log(i),S.error("Ocorreu um erro ao carregar os chamados"),d(!1)}),s(!1)},l=async i=>{if(i.size===0)u(!0);else{let m=[];i.forEach(y=>{m.push({id:y.id,topic:y.data().topic,subject:y.data().subject,client:y.data().client,client_id:y.data().client_id,created_at:y.data().created_at,status:y.data().status,created_formatted:Xe(y.data().created_at.seconds*1e3+y.data().created_at.nanoseconds/1e6)})});const b=i.docs[i.docs.length-1];a(y=>[...y,...m]),C(b)}d(!1)},f=async()=>{d(!0),await oe.startAfter(w).limit(5).get().then(i=>{l(i)}).catch()},v=i=>{E(!p),F(i)};return r?o(U,{children:[e(j,{}),o("main",{className:$.container,children:[e(R,{name:"Atendimentos",children:e(te,{size:24})}),e("section",{className:`${$.content} ${$.dashboard}`,children:e("span",{children:"Buscando Chamados"})})]})]}):o(U,{children:[e(j,{}),o("main",{className:$.container,children:[e(R,{name:"Atendimentos",children:e(te,{size:24})}),t.length===0?o("section",{className:`${$.content} ${$.dashboard}`,children:[e("span",{children:"Nenhum Chamado Registrado..."}),o(P,{to:"/new",className:$.new,children:[e(W,{size:24}),"Novo chamado"]})]}):o(U,{children:[o(P,{to:"/new",className:$.new,children:[e(W,{size:24}),"Novo chamado"]}),o("table",{children:[e("thead",{children:o("tr",{children:[e("th",{scope:"col",children:"Cliente"}),e("th",{scope:"col",children:"Assunto"}),e("th",{scope:"col",children:"Status"}),e("th",{scope:"col",children:"Criado em"}),e("th",{children:"#"})]})}),e("tbody",{children:t.map((i,z)=>o("tr",{children:[e("td",{"data-label":"Cliente",children:i.client}),e("td",{"data-label":"Assunto",children:i.topic}),e("td",{"data-label":"Status",children:e("span",{className:$.badge,style:{backgroundColor:i.status==="Aberto"?"#5cb85c":"#999"},children:i.status})}),e("td",{"data-label":"Cadastrado",children:i.created_formatted}),o("td",{"data-label":"#",children:[e("button",{className:$.action,style:{backgroundColor:"#3583f6"},onClick:()=>v(i),children:e(ge,{color:"#fff",size:16})}),e(P,{className:$.action,style:{backgroundColor:"#f6a935"},to:`/new/${i.id}`,children:e(ve,{color:"#fff",size:16})})]})]},i.id))})]}),n&&e("h3",{style:{marginTop:15},children:"Buscando dados..."}),!n&&!_&&e("button",{className:$.more,onClick:f,children:"Buscar Mais"})]}),p&&e(nt,{content:x,close:v})]})]})},rt="_container_gkq9f_1",st="_content_gkq9f_11",ct="_content_form_gkq9f_19",it="_content_form_avatar_gkq9f_23",lt="_content_logout_gkq9f_76";var O={container:rt,content:st,content_form:ct,content_form_avatar:it,content_logout:lt};const dt=()=>{const{user:t,signOut:a,setUser:r,storageSave:s}=L(),[n,d]=c.exports.useState(t&&t.name),[_,u]=c.exports.useState(t&&t.email),[w,C]=c.exports.useState(t&&t.avatarUrl),[p,E]=c.exports.useState(null);document.title="Profile || HelperDesk";const x=async l=>{var f,v;if((f=l.target.files)==null?void 0:f[0]){const i=(v=l.target.files)==null?void 0:v[0];if(i.type==="image/jpeg"||i.type==="image/png")E(i),C(URL.createObjectURL(l.target.files[0]));else return S.warning("Envie imagem do tipo PNG ou JPEG",N),E(null),null}},F=async()=>{const l=t.uid;await g.storage().ref(`images/${l}/${p==null?void 0:p.name}`).put(p).then(async()=>{await g.storage().ref(`images/${l}`).child(p==null?void 0:p.name).getDownloadURL().then(async f=>{let v=f;await g.firestore().collection("users").doc(t.uid).update({avatarUrl:v,name:n}).then(()=>{let i=q(B({},t),{name:n,avatarUrl:v});r(i),s(i),S.success("Foto Salva com Sucesso",N)})})})},h=async l=>{l.preventDefault(),p===null&&n!==""?await g.firestore().collection("users").doc(t.uid).update({name:n}).then(()=>{let f=q(B({},t),{name:n});r(f),s(f),S.success("Nome alterado com sucesso!",N)}).catch(f=>{S.error("Ocorreu um erro!tente mais tarde!",N)}):n!==""&&p!==null&&F()};return o(U,{children:[e(j,{}),e("main",{className:O.container,children:o("section",{children:[e(R,{name:"Meu perfil",children:e(se,{size:24})}),e("div",{className:O.content,children:o("form",{className:O.content_form,onSubmit:h,children:[o("label",{htmlFor:"upload avatar",className:O.content_form_avatar,children:[e("span",{children:e(be,{color:"#FFF",size:25})}),e("input",{type:"file",accept:"image/*",onChange:x}),w===null?e("img",{src:ie,width:"250",height:"250",alt:"Foto de perfil do usu\xE1rio"}):e("img",{src:w,width:"250",height:"250",alt:"Foto de perfil do usu\xE1rio"})]}),e("label",{htmlFor:"Nome",children:"Nome"}),e("input",{type:"text",value:n,onChange:l=>d(l.target.value)}),e("label",{htmlFor:"Email",children:"Email"}),e("input",{type:"email",value:String(_),disabled:!0}),e("button",{type:"submit",children:"Salvar"})]})}),e("div",{className:O.content,children:e("button",{className:O.content_logout,onClick:()=>a(),children:"Sair"})})]})})]})},ut="_container_tzf5t_1",mt="_container_left_tzf5t_10",ht="_container_left_animate_tzf5t_21",_t="_container_right_tzf5t_24",pt="_container_right_card_tzf5t_31",ft="_card_textfield_tzf5t_48";var D={container:ut,container_left:mt,container_left_animate:ht,container_right:_t,container_right_card:pt,card_textfield:ft};ye().shape({email:ae().email().required(),password:ae()});const gt=()=>{const{SignIn:t,isAuth:a}=L(),[r,s]=c.exports.useState(""),[n,d]=c.exports.useState("");document.title="Signin || HelperDesk";const _=u=>{u.preventDefault(),r!==""&&n!==""&&t(r,n)};return o("main",{className:D.container,children:[o("section",{className:D.container_left,children:[o("h1",{children:["HelperDesk ",e("br",{})," "]}),e("div",{className:D.container_left_animate})]}),e("section",{className:D.container_right,children:o("form",{className:D.container_right_card,onSubmit:_,children:[o("div",{className:D.card_textfield,children:[e("label",{htmlFor:"email",children:"Email"}),e("input",{type:"email",placeholder:"email@email.com",value:r,onChange:u=>s(u.target.value)})]}),o("div",{className:D.card_textfield,children:[e("label",{htmlFor:"password",children:"Password"}),e("input",{type:"password",placeholder:"******",value:n,onChange:u=>d(u.target.value)})]}),e("button",{type:"submit",children:a?"Carregando..":"Acessar"}),e(P,{to:"/register",children:"Criar uma Conta"})]})})]})},vt="_container_1gmfy_1",bt="_container_left_1gmfy_10",yt="_container_left_animate_1gmfy_21",St="_container_right_1gmfy_24",Ct="_container_right_card_1gmfy_31",xt="_card_textfield_1gmfy_48";var k={container:vt,container_left:bt,container_left_animate:yt,container_right:St,container_right_card:Ct,card_textfield:xt};const Nt=()=>{const{SignUp:t,isAuth:a}=L(),[r,s]=c.exports.useState(""),[n,d]=c.exports.useState(""),[_,u]=c.exports.useState("");document.title="Signin || HelperDesk";const w=C=>{C.preventDefault(),_!==""&&r!==""&&n!==""&&t({email:r,password:n,name:_})};return o("main",{className:k.container,children:[o("section",{className:k.container_left,children:[o("h1",{children:["Criar Cadastro ",e("br",{})," "]}),e("div",{className:k.container_left_animate})]}),e("section",{className:k.container_right,children:o("form",{className:k.container_right_card,onSubmit:w,children:[o("div",{className:k.card_textfield,children:[e("label",{htmlFor:"nome",children:"Nome"}),e("input",{type:"name",value:_,onChange:C=>u(C.target.value)})]}),o("div",{className:k.card_textfield,children:[e("label",{htmlFor:"email",children:"Email"}),e("input",{type:"email",value:r,onChange:C=>s(C.target.value)})]}),o("div",{className:k.card_textfield,children:[e("label",{htmlFor:"password",children:"Password"}),e("input",{type:"password",placeholder:"******",value:n,onChange:C=>d(C.target.value)})]}),e("button",{type:"submit",children:a?"Carregando..":"Cadastrar"}),e(P,{to:"/",children:"J\xE1 tem uma conta? Entre"})]})})]})},A=r=>{var s=r,{isPrivate:t}=s,a=ee(s,["isPrivate"]);const{signed:n,loading:d}=L();return d?e("div",{}):!n&&t?e(ne,{to:"/"}):n&&!t?e(ne,{to:"/dashboard"}):e(Se,B({},a))},wt=()=>o(Ce,{children:[e(A,{exact:!0,path:"/",component:gt}),e(A,{exact:!0,path:"/register",component:Nt}),e(A,{exact:!0,path:"/dashboard",component:ot,isPrivate:!0}),e(A,{exact:!0,path:"/profile",component:dt,isPrivate:!0}),e(A,{exact:!0,path:"/customers",component:He,isPrivate:!0}),e(A,{exact:!0,path:"/new",component:J,isPrivate:!0}),e(A,{exact:!0,path:"/new/:postId",component:J,isPrivate:!0}),e(A,{path:"*",component:J})]});function Ft(){return e(ke,{children:o(xe,{children:[e(Ne,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,pauseOnFocusLoss:!1,pauseOnHover:!1}),e(wt,{})]})})}we.render(e(Fe.StrictMode,{children:e(Ft,{})}),document.getElementById("root"));
